<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nusantara Game Hub (PWA)</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Titan+One&display=swap');
        body { font-family: 'Poppins', sans-serif; background: #0f172a; color: white; overflow: hidden; touch-action: none; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .font-titan { font-family: 'Titan One', cursive; }

        /* MENU BUTTONS */
        .game-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer; position: relative; overflow: hidden;
        }
        .game-card:active { transform: scale(0.95); }
        .game-card::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%); transition: 0.5s;
        }
        .game-card:hover::after { transform: translateX(100%); }

        /* IFRAME CONTAINER */
        #game-frame-container {
            position: fixed; inset: 0; z-index: 50; background: #0f172a;
            transform: translateY(100%); transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #game-frame-container.active { transform: translateY(0); }
        iframe { width: 100%; height: 100%; border: none; }

        /* LOADING OVERLAY (Anime Style) */
        #loading-overlay {
            position: fixed; inset: 0; z-index: 100; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            clip-path: circle(150% at 50% 50%); transition: clip-path 1s ease-in-out;
        }
        #loading-overlay.hidden-anim { clip-path: circle(0% at 50% 50%); pointer-events: none; }

        .loader-ring {
            width: 80px; height: 80px; border: 8px solid transparent; border-top-color: #eab308; border-bottom-color: #ef4444;
            border-radius: 50%; animation: spin 1s linear infinite;
        }
        .loader-text {
            margin-top: 20px; font-weight: bold; font-size: 20px; letter-spacing: 5px;
            background: linear-gradient(90deg, #eab308, #ef4444, #eab308); background-size: 200%;
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shine 2s linear infinite;
        }
        @keyframes shine { 0% { background-position: 0%; } 100% { background-position: 200%; } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* AUDIO VISUALIZER DECO */
        .bar { width: 6px; background: #fbbf24; border-radius: 4px; animation: eq 1s infinite alternate; }
        .bar:nth-child(even) { animation-duration: 0.8s; }
        @keyframes eq { 0% { height: 10px; opacity: 0.5; } 100% { height: 40px; opacity: 1; } }
    </style>
</head>
<body class="bg-[url('https://images.unsplash.com/photo-1519681393798-3828fb4090bb?q=80&w=1000&auto=format&fit=crop')] bg-cover">
    <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>

    <!-- MAIN MENU -->
    <div id="main-menu" class="relative z-10 w-full h-screen flex flex-col items-center justify-center p-4 overflow-y-auto">

        <div class="glass p-8 rounded-3xl w-full max-w-md text-center border border-white/10 shadow-2xl relative overflow-hidden">
            <!-- Background Deco -->
            <div class="absolute -top-10 -right-10 w-40 h-40 bg-blue-500/20 rounded-full blur-3xl"></div>
            <div class="absolute -bottom-10 -left-10 w-40 h-40 bg-red-500/20 rounded-full blur-3xl"></div>

            <h1 class="text-5xl font-black mb-2 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 drop-shadow-sm font-titan">NGH v15.0</h1>
            <div class="inline-block px-3 py-1 bg-white/10 rounded-full text-[10px] text-slate-300 mb-6 font-mono border border-white/10">
                v15.0 • Modular System • PWA Ready
            </div>

            <!-- NAME INPUT -->
            <div class="relative mb-6 group">
                <input type="text" id="player-name" value="Player63"
                    class="w-full bg-black/50 text-center text-xl font-bold py-4 rounded-xl border border-white/10 outline-none focus:border-yellow-500 transition-colors text-white"
                    placeholder="Nama Kamu">
                <button onclick="randomName()" class="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center hover:bg-yellow-500 hover:text-black transition">
                    <i class="fa-solid fa-dice text-sm"></i>
                </button>
            </div>

            <!-- GAMES GRID -->
            <div class="grid grid-cols-2 gap-4">
                <div onclick="launchGame('uno.html', 'UNO HD')" class="game-card bg-gradient-to-br from-red-600 to-orange-600 p-6 rounded-2xl flex flex-col items-center justify-center gap-3 shadow-lg hover:shadow-red-500/30">
                    <i class="fa-solid fa-layer-group text-3xl"></i>
                    <span class="font-black text-sm tracking-wider">UNO HD</span>
                </div>
                <div onclick="launchGame('ludo.html', 'LUDO BIRD')" class="game-card bg-gradient-to-br from-blue-600 to-indigo-600 p-6 rounded-2xl flex flex-col items-center justify-center gap-3 shadow-lg hover:shadow-blue-500/30">
                    <i class="fa-solid fa-dice text-3xl"></i>
                    <span class="font-black text-sm tracking-wider">LUDO BIRD</span>
                </div>
                <div onclick="launchGame('catur.html', 'CATUR')" class="game-card bg-slate-700 p-6 rounded-2xl flex flex-col items-center justify-center gap-3 shadow-lg border border-white/10 hover:bg-slate-600 hover:shadow-white/10">
                    <i class="fa-solid fa-chess-king text-3xl text-yellow-400"></i>
                    <span class="font-black text-sm tracking-wider">CATUR</span>
                </div>
                <div onclick="launchGame('monopoli.html', 'MONOPOLY')" class="game-card bg-gradient-to-br from-green-600 to-teal-600 p-6 rounded-2xl flex flex-col items-center justify-center gap-3 shadow-lg hover:shadow-green-500/30">
                    <i class="fa-solid fa-building-columns text-3xl"></i>
                    <span class="font-black text-sm tracking-wider">MONOPOLY</span>
                </div>
            </div>

            <div class="mt-6 text-[10px] text-slate-500">
                Pilih game untuk masuk ke Lobby masing-masing.
            </div>
        </div>

        <!-- MUSIC PLAYER (MINI) -->
        <div class="fixed bottom-4 right-4 bg-black/80 backdrop-blur rounded-full px-4 py-2 flex items-center gap-3 border border-white/10 shadow-xl z-20">
            <div class="flex gap-1 h-4 items-end" id="mini-viz">
                <div class="bar"></div><div class="bar"></div><div class="bar"></div>
            </div>
            <div class="flex flex-col">
                <span class="text-[10px] font-bold text-yellow-500">Cinta Satu Malam</span>
                <span class="text-[8px] text-slate-400">Melinda</span>
            </div>
            <div class="flex gap-2 text-xs text-slate-400">
                <button class="hover:text-white"><i class="fa-solid fa-backward-step"></i></button>
                <button class="hover:text-white"><i class="fa-solid fa-volume-high"></i></button>
                <button class="hover:text-white"><i class="fa-solid fa-forward-step"></i></button>
            </div>
             <button class="ml-2 w-6 h-6 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20"><i class="fa-solid fa-search text-[10px]"></i></button>
        </div>
    </div>

    <!-- GAME CONTAINER (IFRAME) -->
    <div id="game-frame-container">
        <iframe id="game-frame" src=""></iframe>
        <!-- Floating Back Button (Injectable or Overlay) -->
        <!-- We will rely on game's internal button communicating with us -->
    </div>

    <!-- LOADING OVERLAY -->
    <div id="loading-overlay" class="hidden-anim">
        <div class="loader-ring"></div>
        <div class="loader-text">LOADING...</div>
        <div class="mt-4 text-xs text-slate-500 font-mono" id="loading-tip">Tips: Jangan lupa bernafas.</div>
    </div>

    <script>
        // PWA REGISTRATION
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
            .then(() => console.log("SW Registered"))
            .catch(e => console.log("SW Fail:", e));
        }

        function randomName() {
            document.getElementById('player-name').value = "Player" + Math.floor(Math.random()*100);
        }

        async function launchGame(url, title) {
            const name = document.getElementById('player-name').value || "Player";
            const fullUrl = `${url}?name=${encodeURIComponent(name)}`;

            // Show Loading
            const loader = document.getElementById('loading-overlay');
            const tips = ["Siapkan mental...", "Mengocok dadu...", "Menghubungkan satelit...", "Memuat aset HD...", "Minum air putih itu sehat."];
            document.getElementById('loading-tip').innerText = "Tips: " + tips[Math.floor(Math.random()*tips.length)];

            loader.classList.remove('hidden-anim');

            await new Promise(r => setTimeout(r, 1500)); // Fake load for effect

            const frame = document.getElementById('game-frame');
            frame.src = fullUrl;

            // Show Frame
            document.getElementById('game-frame-container').classList.add('active');

            // Hide Loader
            setTimeout(() => {
                loader.classList.add('hidden-anim');
            }, 500);
        }

        function closeGame() {
            document.getElementById('game-frame-container').classList.remove('active');
            setTimeout(() => {
                document.getElementById('game-frame').src = "";
            }, 500);
        }

        // LISTEN FOR MESSAGES FROM IFRAME
        window.addEventListener('message', (e) => {
            if(e.data === 'EXIT_GAME') {
                closeGame();
            }
        });
    </script>
</body>
</html>
